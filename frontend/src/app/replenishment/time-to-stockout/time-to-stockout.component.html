<div
  class="time-to-stockout-container"
  [ngClass]="getSeverityClass()"
  [matTooltip]="getTooltip()"
  matTooltipPosition="above"
  [attr.aria-label]="getDisplayText() + '. ' + getActionLabel()"
  >
  <!-- Main Display -->
  <div class="stockout-main">
    <!-- Action Icon -->
    <mat-icon
      class="action-icon"
      [ngClass]="{'pulse-animation': shouldPulse()}"
      inline="true"
      aria-hidden="true"
      >
      {{ getActionIcon() }}
    </mat-icon>

    <!-- Countdown Text -->
    <div class="stockout-text" [ngClass]="{'pulse-text': shouldPulse()}">
      <span class="countdown">{{ getDisplayText() }}</span>
      @if (getUrgencyBadge(); as badge) {
        <span class="urgency-badge">
          {{ badge }}
        </span>
      }
    </div>
  </div>

  <!-- Progress Bar -->
  @if (data.hasBurnRate) {
    <div class="progress-container">
      <mat-progress-bar
        mode="determinate"
        [value]="getProgressValue()"
        [ngClass]="getProgressColorClass()"
        [attr.aria-label]="'Stock level: ' + getProgressValue() + '% remaining'"
      ></mat-progress-bar>
    </div>
  }
</div>
