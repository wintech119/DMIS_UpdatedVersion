<div class="wizard-container">
  <!-- Header -->
  <mat-card class="wizard-header">
    <div class="header-content">
      <button mat-icon-button (click)="backToDashboard()" class="back-btn" matTooltip="Back to Dashboard">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="header-text">
        <h1>Generate Needs List</h1>
        <p>3-step wizard for supply replenishment planning</p>
      </div>
    </div>
  </mat-card>

  <!-- Stepper -->
  <mat-stepper linear #stepper (selectionChange)="onStepChange($event)" class="wizard-stepper">

    <!-- Step 1: Review & Confirm Scope -->
    <mat-step [completed]="(isStep1Valid$ | async) || false">
      <ng-template matStepLabel>Review Scope</ng-template>
      <app-scope-step (next)="stepper.next()"></app-scope-step>
    </mat-step>

    <!-- Step 2: Preview Results -->
    <mat-step [completed]="(isStep2Valid$ | async) || false">
      <ng-template matStepLabel>Preview Results</ng-template>
      <app-preview-step
        (back)="stepper.previous()"
        (next)="stepper.next()"
      ></app-preview-step>
    </mat-step>

    <!-- Step 3: Submit for Approval -->
    <mat-step>
      <ng-template matStepLabel>Submit</ng-template>
      <app-submit-step
        (back)="stepper.previous()"
        (complete)="onComplete()"
      ></app-submit-step>
    </mat-step>

  </mat-stepper>
</div>
